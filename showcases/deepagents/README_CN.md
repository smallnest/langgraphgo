# DeepAgents - æ–‡ä»¶ç³»ç»Ÿæ„ŸçŸ¥å‹ AI æ™ºèƒ½ä½“

ä¸€ä¸ªå…·æœ‰æ–‡ä»¶ç³»ç»Ÿè®¿é—®å’Œä»»åŠ¡ç®¡ç†èƒ½åŠ›çš„æ™ºèƒ½ä½“ Go å®ç°ï¼Œä½¿ç”¨ [langgraphgo](https://github.com/smallnest/langgraphgo) å’Œ [langchaingo](https://github.com/tmc/langchaingo) æ„å»ºã€‚

DeepAgents æä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„æ™ºèƒ½ä½“æ¡†æ¶ï¼Œå¯ä»¥ä¸æ–‡ä»¶ç³»ç»Ÿäº¤äº’ã€ç®¡ç†ä»»åŠ¡å¹¶å°†å·¥ä½œå§”æ‰˜ç»™å­æ™ºèƒ½ä½“ï¼Œéå¸¸é€‚åˆè‡ªåŠ¨åŒ–ã€æ–‡ä»¶å¤„ç†å’Œå¤æ‚ä»»åŠ¡ç¼–æ’ã€‚

## æ¦‚è¿°

DeepAgents æ˜¯ä¸€ä¸ªèƒ½å¤Ÿï¼š
- **è¯»å†™æ–‡ä»¶**ï¼šåœ¨é…ç½®çš„å·¥ä½œç©ºé—´å†…å®Œå…¨è®¿é—®æ–‡ä»¶ç³»ç»Ÿ
- **ç®¡ç†ä»»åŠ¡**ï¼šå†…ç½®å¾…åŠäº‹é¡¹åˆ—è¡¨ç®¡ç†
- **å§”æ‰˜å·¥ä½œ**ï¼šç”Ÿæˆå­æ™ºèƒ½ä½“å¤„ç†å¤æ‚å­ä»»åŠ¡
- **æœç´¢æ–‡ä»¶**ï¼šåŸºäºæ¨¡å¼çš„æ–‡ä»¶æŸ¥æ‰¾ï¼Œæ”¯æŒ glob
- **è‡ªä¸»æ‰§è¡Œ**ï¼šä½¿ç”¨ LLM é©±åŠ¨çš„æ¨ç†å®Œæˆä»»åŠ¡

## æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       DeepAgents                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  æ–‡ä»¶ç³»ç»Ÿ    â”‚      â”‚   å¾…åŠäº‹é¡¹   â”‚      â”‚  å­æ™ºèƒ½ä½“â”‚ â”‚
â”‚  â”‚    å·¥å…·      â”‚      â”‚    ç®¡ç†å™¨    â”‚      â”‚   ç³»ç»Ÿ   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚        â”‚                      â”‚                     â”‚      â”‚
â”‚        â–¼                      â–¼                     â–¼      â”‚
â”‚   â€¢ ls                   â€¢ write_todos          â€¢ task    â”‚
â”‚   â€¢ read_file            â€¢ read_todos                     â”‚
â”‚   â€¢ write_file                                            â”‚
â”‚   â€¢ glob                                                  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚           LangGraph æ™ºèƒ½ä½“ï¼ˆé¢„æ„å»ºï¼‰                 â”‚ â”‚
â”‚  â”‚         LLM é©±åŠ¨çš„æ¨ç†å’Œå·¥å…·ä½¿ç”¨                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## åŠŸèƒ½ç‰¹æ€§

### ğŸ—‚ï¸ æ–‡ä»¶ç³»ç»Ÿå·¥å…·
- **ls**ï¼šåˆ—å‡ºæ–‡ä»¶å’Œç›®å½•åŠå…¶å¤§å°ä¿¡æ¯
- **read_file**ï¼šè¯»å–æ–‡ä»¶å†…å®¹
- **write_file**ï¼šåˆ›å»ºæˆ–æ›´æ–°æ–‡ä»¶
- **glob**ï¼šæŸ¥æ‰¾åŒ¹é…æ¨¡å¼çš„æ–‡ä»¶

### âœ… ä»»åŠ¡ç®¡ç†
- **write_todos**ï¼šåˆ›å»ºå’Œæ›´æ–°å¾…åŠäº‹é¡¹åˆ—è¡¨
- **read_todos**ï¼šæ£€ç´¢å½“å‰ä»»åŠ¡
- **çº¿ç¨‹å®‰å…¨**ï¼šä½¿ç”¨äº’æ–¥é”æ”¯æŒå¹¶å‘è®¿é—®

### ğŸ¤– å­æ™ºèƒ½ä½“ç³»ç»Ÿ
- **task**ï¼šå°†å¤æ‚ä»»åŠ¡å§”æ‰˜ç»™ä¸“ä¸šå­æ™ºèƒ½ä½“
- **å¯é…ç½®å¤„ç†å™¨**ï¼šè‡ªå®šä¹‰å­æ™ºèƒ½ä½“é€»è¾‘
- **åˆ†å±‚ä»»åŠ¡åˆ†è§£**ï¼šåˆ†è§£å¤æ‚é—®é¢˜

### ğŸ”§ çµæ´»é…ç½®
- **è‡ªå®šä¹‰å·¥ä½œç©ºé—´**ï¼šå¯é…ç½®æ ¹ç›®å½•
- **ç³»ç»Ÿæç¤ºè¯**ï¼šå®šåˆ¶æ™ºèƒ½ä½“è¡Œä¸º
- **å·¥å…·é›†æˆ**ï¼šè½»æ¾æ‰©å±•æ–°å·¥å…·

## å‰ç½®è¦æ±‚

- **Go**ï¼šç‰ˆæœ¬ 1.21 æˆ–æ›´é«˜
- **API å¯†é’¥**ï¼šOpenAI å…¼å®¹çš„ APIï¼ˆOpenAIã€DeepSeek ç­‰ï¼‰

## å®‰è£…

```bash
# å¯¼èˆªåˆ° deepagents ç›®å½•
cd showcases/deepagents

# è®¾ç½®ç¯å¢ƒå˜é‡
export OPENAI_API_KEY="your-api-key-here"

# å¯é€‰ï¼šå¦‚æœä½¿ç”¨ DeepSeek æˆ–å…¶ä»–æä¾›å•†
export OPENAI_API_BASE="https://api.deepseek.com/v1"

# è¿è¡Œç¤ºä¾‹
go run main.go
```

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ç¤ºä¾‹

```go
package main

import (
    "context"
    "log"

    "github.com/smallnest/langgraphgo/showcases/deepagents/agent"
    "github.com/tmc/langchaingo/llms"
    "github.com/tmc/langchaingo/llms/openai"
)

func main() {
    ctx := context.Background()

    // åˆå§‹åŒ– LLM
    model, err := openai.New()
    if err != nil {
        log.Fatalf("åˆ›å»º LLM å¤±è´¥: %v", err)
    }

    // åˆ›å»º Deep Agent
    deepAgent, err := agent.CreateDeepAgent(model,
        agent.WithRootDir("./workspace"),
        agent.WithSystemPrompt("ä½ æ˜¯ä¸€ä¸ªå…·æœ‰æ–‡ä»¶ç³»ç»Ÿè®¿é—®èƒ½åŠ›çš„åŠ©æ‰‹ã€‚"),
    )
    if err != nil {
        log.Fatalf("åˆ›å»ºæ™ºèƒ½ä½“å¤±è´¥: %v", err)
    }

    // è¿è¡Œæ™ºèƒ½ä½“
    inputs := map[string]interface{}{
        "messages": []llms.MessageContent{
            llms.TextParts(llms.ChatMessageTypeHuman,
                "åˆ›å»ºä¸€ä¸ªåä¸º 'hello.txt' çš„æ–‡ä»¶ï¼Œå†…å®¹ä¸º 'Hello, DeepAgents!'ï¼Œç„¶åè¯»å–å®ƒã€‚"),
        },
    }

    result, err := deepAgent.Invoke(ctx, inputs)
    if err != nil {
        log.Fatalf("æ™ºèƒ½ä½“æ‰§è¡Œå¤±è´¥: %v", err)
    }

    // å¤„ç†ç»“æœ
    // ...
}
```

### ä½¿ç”¨å­æ™ºèƒ½ä½“å¤„ç†å™¨

```go
// å®šä¹‰è‡ªå®šä¹‰å­æ™ºèƒ½ä½“å¤„ç†å™¨
subAgentHandler := func(ctx context.Context, task string) (string, error) {
    log.Printf("[å­æ™ºèƒ½ä½“] å¤„ç†ä»»åŠ¡: %s", task)

    // å®ç°è‡ªå®šä¹‰é€»è¾‘ï¼Œç”Ÿæˆå¦ä¸€ä¸ªæ™ºèƒ½ä½“ç­‰
    // ä¾‹å¦‚ï¼Œå§”æ‰˜ç»™ä¸“é—¨çš„ç ”ç©¶æ™ºèƒ½ä½“

    return "ä»»åŠ¡å®Œæˆ: " + task, nil
}

// åˆ›å»ºæ”¯æŒå­æ™ºèƒ½ä½“çš„æ™ºèƒ½ä½“
deepAgent, err := agent.CreateDeepAgent(model,
    agent.WithRootDir("./workspace"),
    agent.WithSubAgentHandler(subAgentHandler),
)
```

## é…ç½®é€‰é¡¹

### CreateDeepAgent é€‰é¡¹

```go
type DeepAgentOptions struct {
    RootDir         string              // å·¥ä½œç©ºé—´æ ¹ç›®å½•
    SystemPrompt    string              // æ™ºèƒ½ä½“ç³»ç»Ÿæç¤ºè¯
    SubAgentHandler SubAgentHandler     // å§”æ‰˜ä»»åŠ¡çš„å¤„ç†å™¨
}
```

**å¯ç”¨é€‰é¡¹**ï¼š
- `WithRootDir(path string)`ï¼šè®¾ç½®å·¥ä½œç©ºé—´ç›®å½•ï¼ˆé»˜è®¤ï¼š"."ï¼‰
- `WithSystemPrompt(prompt string)`ï¼šè‡ªå®šä¹‰æ™ºèƒ½ä½“è¡Œä¸ºï¼ˆé»˜è®¤ï¼š"You are a helpful deep agent."ï¼‰
- `WithSubAgentHandler(handler func)`ï¼šå¯ç”¨ä»»åŠ¡å§”æ‰˜ç»™å­æ™ºèƒ½ä½“

### ç¯å¢ƒå˜é‡

| å˜é‡ | æè¿° | é»˜è®¤å€¼ | å¿…éœ€ |
|------|------|--------|------|
| `OPENAI_API_KEY` | OpenAI API å¯†é’¥ | æ—  | âœ… æ˜¯ |
| `OPENAI_API_BASE` | API åŸºç¡€ URL | OpenAI é»˜è®¤å€¼ | âŒ å¦ |

## å·¥å…·å‚è€ƒ

### æ–‡ä»¶ç³»ç»Ÿå·¥å…·

#### ls
**æè¿°**ï¼šåˆ—å‡ºç›®å½•ä¸­çš„æ–‡ä»¶
**è¾“å…¥**ï¼šç›®å½•è·¯å¾„ï¼ˆç›¸å¯¹äºæ ¹ç›®å½•ï¼‰
**è¾“å‡º**ï¼šæ ¼å¼åŒ–åˆ—è¡¨ï¼ŒåŒ…å«ç±»å‹ï¼ˆD/Fï¼‰ã€åç§°å’Œå¤§å°

```
D subdir 0
F file.txt 1234
```

#### read_file
**æè¿°**ï¼šè¯»å–æ–‡ä»¶å†…å®¹
**è¾“å…¥**ï¼šæ–‡ä»¶è·¯å¾„ï¼ˆç›¸å¯¹äºæ ¹ç›®å½•ï¼‰
**è¾“å‡º**ï¼šæ–‡ä»¶å†…å®¹å­—ç¬¦ä¸²

#### write_file
**æè¿°**ï¼šå†™å…¥æ–‡ä»¶
**è¾“å…¥**ï¼šè·¯å¾„å’Œå†…å®¹ï¼Œç”¨æ¢è¡Œç¬¦åˆ†éš”
```
filename.txt
æ–‡ä»¶å†…å®¹åœ¨è¿™é‡Œ
```
**è¾“å‡º**ï¼šæˆåŠŸç¡®è®¤

#### glob
**æè¿°**ï¼šæŸ¥æ‰¾åŒ¹é…æ¨¡å¼çš„æ–‡ä»¶
**è¾“å…¥**ï¼šGlob æ¨¡å¼ï¼ˆä¾‹å¦‚ `*.txt`ã€`**/*.go`ï¼‰
**è¾“å‡º**ï¼šæ¢è¡Œç¬¦åˆ†éš”çš„åŒ¹é…æ–‡ä»¶åˆ—è¡¨

### ä»»åŠ¡ç®¡ç†å·¥å…·

#### write_todos
**æè¿°**ï¼šåˆ›å»ºæˆ–æ›´æ–°å¾…åŠäº‹é¡¹åˆ—è¡¨
**è¾“å…¥**ï¼šæ¢è¡Œç¬¦åˆ†éš”çš„ä»»åŠ¡åˆ—è¡¨
```
ä»»åŠ¡ 1
ä»»åŠ¡ 2
ä»»åŠ¡ 3
```
**è¾“å‡º**ï¼šæˆåŠŸç¡®è®¤

#### read_todos
**æè¿°**ï¼šè¯»å–å½“å‰å¾…åŠäº‹é¡¹åˆ—è¡¨
**è¾“å…¥**ï¼šç©ºï¼ˆæœªä½¿ç”¨ï¼‰
**è¾“å‡º**ï¼šæ¢è¡Œç¬¦åˆ†éš”çš„å¾…åŠäº‹é¡¹åˆ—è¡¨

### å­æ™ºèƒ½ä½“å·¥å…·

#### task
**æè¿°**ï¼šå°†ä»»åŠ¡å§”æ‰˜ç»™å­æ™ºèƒ½ä½“
**è¾“å…¥**ï¼šä»»åŠ¡æè¿°
**è¾“å‡º**ï¼šå­æ™ºèƒ½ä½“å¤„ç†å™¨çš„ç»“æœ

**ç¤ºä¾‹ç”¨ä¾‹**ï¼š
- ä¸ºå¤æ‚æŸ¥è¯¢ç”Ÿæˆä¸“é—¨çš„ç ”ç©¶æ™ºèƒ½ä½“
- å°†æ–‡ä»¶å¤„ç†å§”æ‰˜ç»™æ‰¹å¤„ç†å™¨
- åˆ›å»ºåˆ†å±‚ä»»åŠ¡å·¥ä½œæµ

## é¡¹ç›®ç»“æ„

```
deepagents/
â”œâ”€â”€ main.go                 # ç¤ºä¾‹åº”ç”¨ç¨‹åº
â”œâ”€â”€ agent/
â”‚   â””â”€â”€ agent.go           # æ™ºèƒ½ä½“åˆ›å»ºå’Œé…ç½®
â””â”€â”€ tools/
    â”œâ”€â”€ filesystem.go      # æ–‡ä»¶æ“ä½œï¼ˆlsã€readã€writeã€globï¼‰
    â”œâ”€â”€ todo.go            # ä»»åŠ¡ç®¡ç†ï¼ˆwrite_todosã€read_todosï¼‰
    â””â”€â”€ subagent.go        # å­æ™ºèƒ½ä½“å§”æ‰˜ï¼ˆtaskï¼‰
```

## å·¥ä½œåŸç†

### 1. æ™ºèƒ½ä½“åˆå§‹åŒ–

```go
// CreateDeepAgent å‡½æ•°ï¼š
// 1. å¦‚éœ€è¦ï¼Œåˆ›å»ºå·¥ä½œç©ºé—´ç›®å½•
// 2. åˆå§‹åŒ– TodoManager
// 3. ä½¿ç”¨é…ç½®é€‰é¡¹åˆ›å»ºæ‰€æœ‰å·¥å…·
// 4. ä½¿ç”¨ prebuilt.CreateAgent æ„å»ºæ™ºèƒ½ä½“
```

### 2. å·¥å…·æ³¨å†Œ

æ‰€æœ‰å·¥å…·å®ç° `Tool` æ¥å£ï¼š
```go
type Tool interface {
    Name() string
    Description() string
    Call(ctx context.Context, input string) (string, error)
}
```

å·¥å…·æ³¨å†Œåˆ°æ™ºèƒ½ä½“å¹¶æš´éœ²ç»™ LLM è¿›è¡Œå‡½æ•°è°ƒç”¨ã€‚

### 3. æ™ºèƒ½ä½“æ‰§è¡Œ

æ™ºèƒ½ä½“ä½¿ç”¨ LangGraph çš„é¢„æ„å»ºæ™ºèƒ½ä½“æ¨¡å¼ï¼š
1. **æ¥æ”¶æ¶ˆæ¯**ï¼šç”¨æˆ·æä¾›è‡ªç„¶è¯­è¨€æŒ‡ä»¤
2. **æ¨ç†**ï¼šLLM å†³å®šä½¿ç”¨å“ªäº›å·¥å…·
3. **è¡ŒåŠ¨**ï¼šæ‰§è¡Œå·¥å…·è°ƒç”¨
4. **å¾ªç¯**ï¼šç»§ç»­ç›´åˆ°ä»»åŠ¡å®Œæˆ
5. **å“åº”**ï¼šè¿”å›æœ€ç»ˆç»“æœ

### 4. å­æ™ºèƒ½ä½“å§”æ‰˜

å½“æ™ºèƒ½ä½“é‡åˆ°å¤æ‚ä»»åŠ¡æ—¶ï¼š
1. æ™ºèƒ½ä½“ä½¿ç”¨ä»»åŠ¡æè¿°è°ƒç”¨ `task` å·¥å…·
2. SubAgentHandler æ¥æ”¶ä»»åŠ¡
3. å¤„ç†å™¨å¯ä»¥ç”Ÿæˆæ–°æ™ºèƒ½ä½“ã€è¿›è¡Œ API è°ƒç”¨ç­‰
4. ç»“æœè¿”å›ç»™ä¸»æ™ºèƒ½ä½“
5. ä¸»æ™ºèƒ½ä½“ç»§ç»­å¤„ç†ç»“æœ

## ç¤ºä¾‹ç”¨ä¾‹

### 1. æ–‡ä»¶ç»„ç»‡

```go
inputs := map[string]interface{}{
    "messages": []llms.MessageContent{
        llms.TextParts(llms.ChatMessageTypeHuman,
            "å°†æ‰€æœ‰ .txt æ–‡ä»¶ç»„ç»‡åˆ° 'docs' ç›®å½•ä¸­"),
    },
}
```

**æ™ºèƒ½ä½“æ“ä½œ**ï¼š
1. ä½¿ç”¨ `glob` æŸ¥æ‰¾æ‰€æœ‰ .txt æ–‡ä»¶
2. åˆ›å»º docs ç›®å½•
3. ä½¿ç”¨ `read_file` å’Œ `write_file` ç§»åŠ¨æ–‡ä»¶
4. ç¡®è®¤å®Œæˆ

### 2. ä»»åŠ¡ç®¡ç†

```go
inputs := map[string]interface{}{
    "messages": []llms.MessageContent{
        llms.TextParts(llms.ChatMessageTypeHuman,
            "ä¸ºè®¾ç½®æ–° Go é¡¹ç›®åˆ›å»ºå¾…åŠäº‹é¡¹åˆ—è¡¨"),
    },
}
```

**æ™ºèƒ½ä½“æ“ä½œ**ï¼š
1. ç”Ÿæˆå¾…åŠäº‹é¡¹åˆ—è¡¨
2. ä½¿ç”¨ `write_todos` ä¿å­˜ä»»åŠ¡
3. ç¨åå¯ä»¥ä½¿ç”¨ `read_todos` è·Ÿè¸ªè¿›åº¦

### 3. æ‰¹é‡å¤„ç†

```go
subAgentHandler := func(ctx context.Context, task string) (string, error) {
    // å¤„ç†å•ä¸ªæ–‡ä»¶
    return processFile(task)
}

inputs := map[string]interface{}{
    "messages": []llms.MessageContent{
        llms.TextParts(llms.ChatMessageTypeHuman,
            "å¤„ç† data ç›®å½•ä¸­çš„æ‰€æœ‰ JSON æ–‡ä»¶"),
    },
}
```

**æ™ºèƒ½ä½“æ“ä½œ**ï¼š
1. ä½¿ç”¨ `glob` æŸ¥æ‰¾ JSON æ–‡ä»¶
2. é€šè¿‡ `task` å·¥å…·å°†æ¯ä¸ªæ–‡ä»¶å§”æ‰˜ç»™å­æ™ºèƒ½ä½“
3. æ±‡æ€»ç»“æœ

### 4. ä»£ç ç”Ÿæˆ

```go
inputs := map[string]interface{}{
    "messages": []llms.MessageContent{
        llms.TextParts(llms.ChatMessageTypeHuman,
            "åœ¨ server.go ä¸­åˆ›å»ºä¸€ä¸ªç®€å•çš„ Go HTTP æœåŠ¡å™¨"),
    },
}
```

**æ™ºèƒ½ä½“æ“ä½œ**ï¼š
1. ç”Ÿæˆä»£ç å†…å®¹
2. ä½¿ç”¨ `write_file` åˆ›å»º server.go
3. ç¡®è®¤åˆ›å»º

## æœ€ä½³å®è·µ

### 1. å·¥ä½œç©ºé—´éš”ç¦»

âœ… **å¥½çš„**ï¼š
```go
agent.WithRootDir("./workspace")  // éš”ç¦»çš„å·¥ä½œç©ºé—´
```

âŒ **é¿å…**ï¼š
```go
agent.WithRootDir("/")  // ç³»ç»ŸèŒƒå›´è®¿é—®ï¼ˆå®‰å…¨é£é™©ï¼‰
```

### 2. æ¸…æ™°çš„ç³»ç»Ÿæç¤ºè¯

âœ… **å¥½çš„**ï¼š
```go
agent.WithSystemPrompt("ä½ æ˜¯æ–‡ä»¶ç»„ç»‡è€…ã€‚éœ€è¦æ—¶åˆ›å»ºç›®å½•å¹¶ç³»ç»Ÿåœ°ç§»åŠ¨æ–‡ä»¶ã€‚")
```

âŒ **å¤ªæ¨¡ç³Š**ï¼š
```go
agent.WithSystemPrompt("ä½ å¾ˆæœ‰å¸®åŠ©ã€‚")
```

### 3. ç»“æ„åŒ–çš„å­æ™ºèƒ½ä½“å¤„ç†å™¨

```go
subAgentHandler := func(ctx context.Context, task string) (string, error) {
    // è§£æä»»åŠ¡
    taskType, params := parseTask(task)

    // è·¯ç”±åˆ°ä¸“é—¨çš„å¤„ç†å™¨
    switch taskType {
    case "research":
        return researchAgent.Handle(ctx, params)
    case "analyze":
        return analysisAgent.Handle(ctx, params)
    default:
        return "", fmt.Errorf("æœªçŸ¥ä»»åŠ¡ç±»å‹: %s", taskType)
    }
}
```

### 4. é”™è¯¯å¤„ç†

```go
result, err := deepAgent.Invoke(ctx, inputs)
if err != nil {
    log.Printf("æ™ºèƒ½ä½“å¤±è´¥: %v", err)
    // å®ç°é‡è¯•é€»è¾‘æˆ–å›é€€
}
```

## é«˜çº§ç”¨æ³•

### è‡ªå®šä¹‰å·¥å…·é›†æˆ

é€šè¿‡å®ç° `Tool` æ¥å£æ·»åŠ æ–°å·¥å…·ï¼š

```go
type CustomTool struct {
    // é…ç½®
}

func (t *CustomTool) Name() string {
    return "custom_tool"
}

func (t *CustomTool) Description() string {
    return "ä¸º LLM æä¾›çš„æè¿°"
}

func (t *CustomTool) Call(ctx context.Context, input string) (string, error) {
    // å®ç°
    return result, nil
}
```

ç„¶åæ³¨å†Œåˆ°æ™ºèƒ½ä½“ï¼š
```go
agentTools := []ltools.Tool{
    // ... ç°æœ‰å·¥å…·
    &CustomTool{},
}

agent, err := prebuilt.CreateAgent(model, agentTools, ...)
```

### åˆ†å±‚æ™ºèƒ½ä½“ç³»ç»Ÿ

```go
// åˆ›å»ºä¸“é—¨çš„æ™ºèƒ½ä½“
researchAgent := createResearchAgent(model)
analysisAgent := createAnalysisAgent(model)

// ä¸»æ™ºèƒ½ä½“å§”æ‰˜ç»™ä¸“é—¨çš„æ™ºèƒ½ä½“
mainHandler := func(ctx context.Context, task string) (string, error) {
    if strings.Contains(task, "research") {
        return researchAgent.Invoke(ctx, taskInputs)
    }
    if strings.Contains(task, "analyze") {
        return analysisAgent.Invoke(ctx, taskInputs)
    }
    return "", fmt.Errorf("æœªçŸ¥ä»»åŠ¡ç±»å‹")
}

mainAgent := agent.CreateDeepAgent(model,
    agent.WithSubAgentHandler(mainHandler),
)
```

### æŒä¹…åŒ–å¾…åŠäº‹é¡¹ç®¡ç†

```go
// å°†å¾…åŠäº‹é¡¹ä¿å­˜åˆ°æ–‡ä»¶
todoManager := tools.NewTodoManager()

// å¯åŠ¨æ—¶ä»æ–‡ä»¶åŠ è½½
if data, err := os.ReadFile("todos.txt"); err == nil {
    // ä»æ–‡ä»¶åˆå§‹åŒ–
}

// æ›´æ–°åä¿å­˜åˆ°æ–‡ä»¶
// ï¼ˆåœ¨ WriteTodosTool.Call ä¸­å®ç°ï¼‰
```

## æ•…éšœæ’é™¤

### API å¯†é’¥æœªè®¾ç½®

```
OPENAI_API_KEY not set, skipping example execution
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
export OPENAI_API_KEY="sk-..."
```

### æƒé™è¢«æ‹’ç»

å¦‚æœæ–‡ä»¶ç³»ç»Ÿæ“ä½œå¤±è´¥ï¼š
- æ£€æŸ¥å·¥ä½œç©ºé—´ç›®å½•æƒé™
- ç¡®ä¿æ ¹ç›®å½•å­˜åœ¨ä¸”å¯å†™
- éªŒè¯ç”¨æˆ·æœ‰è®¿é—®å·¥ä½œç©ºé—´çš„æƒé™

### å·¥å…·è°ƒç”¨å¤±è´¥

å¦‚æœå·¥å…·æœªè¢«æ­£ç¡®è°ƒç”¨ï¼š
- æ£€æŸ¥å·¥å…·æè¿°æ˜¯å¦æ¸…æ™°
- éªŒè¯ LLM æ¨¡å‹æ”¯æŒå‡½æ•°è°ƒç”¨
- å®¡æŸ¥ç³»ç»Ÿæç¤ºè¯çš„æ¸…æ™°åº¦
- å¯ç”¨è¯¦ç»†æ—¥å¿—è®°å½•ä»¥æŸ¥çœ‹ LLM æ¨ç†

### å­æ™ºèƒ½ä½“æœªè¢«è°ƒç”¨

å¦‚æœä»»åŠ¡å§”æ‰˜ä¸èµ·ä½œç”¨ï¼š
- éªŒè¯ SubAgentHandler å·²é…ç½®
- æ£€æŸ¥ä»»åŠ¡æè¿°æ˜¯å¦å…·ä½“
- ç¡®ä¿å¤„ç†å™¨ä¸æ˜¯ nil
- å®¡æŸ¥å¤„ç†å™¨çš„é”™è¯¯æ—¥å¿—

## æ€§èƒ½è€ƒè™‘

### æ–‡ä»¶ç³»ç»Ÿæ“ä½œ

- **è¯»å–æ–‡ä»¶**ï¼šå¯¹äºå°æ–‡ä»¶ï¼ˆ<1MBï¼‰å¾ˆå¿«
- **å†™å…¥æ–‡ä»¶**ï¼šåŸå­æ“ä½œï¼Œå¹¶å‘è®¿é—®å®‰å…¨
- **Glob**ï¼šæ€§èƒ½å–å†³äºç›®å½•å¤§å°
- **Ls**ï¼šå¯¹äºåˆç†å¤§å°çš„ç›®å½•å¾ˆé«˜æ•ˆ

### LLM è°ƒç”¨

æ¯æ¬¡æ™ºèƒ½ä½“è°ƒç”¨å¯èƒ½æ¶‰åŠï¼š
- 1-5 æ¬¡ LLM è°ƒç”¨ï¼ˆå–å†³äºä»»åŠ¡å¤æ‚æ€§ï¼‰
- å·¥å…·è°ƒç”¨æŒ‰é¡ºåºæ‰§è¡Œ
- è€ƒè™‘å¯¹ç®€å•ä»»åŠ¡ä½¿ç”¨æ›´å¿«çš„æ¨¡å‹ï¼ˆgpt-3.5-turboï¼‰

### ä¼˜åŒ–æŠ€å·§

1. **ä½¿ç”¨å…·ä½“æç¤ºè¯**ï¼šå‡å°‘æ¨ç†è¿­ä»£
2. **æ‰¹é‡æ“ä½œ**ï¼šå¯èƒ½æ—¶åˆ†ç»„æ–‡ä»¶æ“ä½œ
3. **ç¼“å­˜ç»“æœ**ï¼šåœ¨ SubAgentHandler ä¸­å®ç°ç¼“å­˜
4. **é™åˆ¶å·¥å…·é›†**ï¼šä»…åŒ…å«å¿…è¦çš„å·¥å…·

## å®‰å…¨è€ƒè™‘

### å·¥ä½œç©ºé—´éš”ç¦»

å§‹ç»ˆä½¿ç”¨ä¸“ç”¨çš„å·¥ä½œç©ºé—´ç›®å½•ï¼š
```go
agent.WithRootDir("./safe_workspace")
```

### è¾“å…¥éªŒè¯

æ™ºèƒ½ä½“æ‰§è¡Œ LLM ç”Ÿæˆçš„å·¥å…·è°ƒç”¨ã€‚ä¸ºå¢å¼ºå®‰å…¨æ€§ï¼š
- ä½¿ç”¨å—é™çš„å·¥ä½œç©ºé—´
- å®ç°å·¥å…·è¾“å…¥éªŒè¯
- æ‰§è¡Œå‰å®¡æŸ¥ç”Ÿæˆçš„ä»£ç 
- ç›‘æ§æ–‡ä»¶ç³»ç»Ÿæ“ä½œ

### API å¯†é’¥ä¿æŠ¤

```bash
# ä½¿ç”¨ç¯å¢ƒå˜é‡
export OPENAI_API_KEY="..."

# ä¸è¦åœ¨æºä»£ç ä¸­ç¡¬ç¼–ç 
# âŒ apiKey := "sk-..."
```

## æœªæ¥å¢å¼º

è®¡åˆ’åŠŸèƒ½ï¼š
- [ ] æ–‡ä»¶ç›‘è§†å’Œäº‹ä»¶é©±åŠ¨æ‰§è¡Œ
- [ ] æ•°æ®åº“é›†æˆå·¥å…·
- [ ] HTTP è¯·æ±‚å·¥å…·
- [ ] Git æ“ä½œæ”¯æŒ
- [ ] å½’æ¡£/å‹ç¼©å·¥å…·
- [ ] å›¾åƒå¤„ç†å·¥å…·
- [ ] æŒä¹…åŒ–çŠ¶æ€ç®¡ç†
- [ ] å¤šæ™ºèƒ½ä½“åä½œ
- [ ] å·¥ä½œæµæ¨¡æ¿

## è®¸å¯è¯

MIT License - ä¸çˆ¶é¡¹ç›® langgraphgo ç›¸åŒ

## å‚è€ƒèµ„æ–™

- [LangGraph Go](https://github.com/smallnest/langgraphgo) - åŸºäºå›¾çš„æ™ºèƒ½ä½“æ¡†æ¶
- [LangChain Go](https://github.com/tmc/langchaingo) - LLM é›†æˆåº“
- [OpenAI Function Calling](https://platform.openai.com/docs/guides/function-calling) - å·¥å…·ä½¿ç”¨æ–‡æ¡£

## è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼æ”¹è¿›é¢†åŸŸï¼š
- é¢å¤–çš„æ–‡ä»¶ç³»ç»Ÿå·¥å…·
- å¢å¼ºçš„é”™è¯¯å¤„ç†
- å·¥å…·è¾“å…¥éªŒè¯
- æ€§èƒ½ä¼˜åŒ–
- æ–‡æ¡£æ”¹è¿›
- ç¤ºä¾‹åº”ç”¨ç¨‹åº

## æ”¯æŒ

å¯¹äºé—®é¢˜å’Œç–‘é—®ï¼š
- æŸ¥çœ‹æœ¬ README
- æ£€æŸ¥ main.go ä¸­çš„ç¤ºä¾‹
- åœ¨ langgraphgo GitHub ä»“åº“ä¸Šå¼€å¯ issue

---

**æ„å»ºå·¥å…·**ï¼š
- [langgraphgo](https://github.com/smallnest/langgraphgo) - æ™ºèƒ½ä½“ç¼–æ’
- [langchaingo](https://github.com/tmc/langchaingo) - LLM é›†æˆ
- æ ‡å‡† Go åº“ç”¨äºæ–‡ä»¶ç³»ç»Ÿæ“ä½œ
